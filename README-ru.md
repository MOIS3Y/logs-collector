# LOGS-COLLECTOR

```sh
‚ñà‚ñë‚ñë‚ÄÉ‚ñà‚ñÄ‚ñà‚ÄÉ‚ñà‚ñÄ‚ñÄ‚ÄÉ‚ñà‚ñÄ‚ÄÉ‚ñÑ‚ñÑ‚ÄÉ‚ñà‚ñÄ‚ñÄ‚ÄÉ‚ñà‚ñÄ‚ñà‚ÄÉ‚ñà‚ñë‚ñë‚ÄÉ‚ñà‚ñë‚ñë‚ÄÉ‚ñà‚ñÄ‚ñÄ‚ÄÉ‚ñà‚ñÄ‚ñÄ‚ÄÉ‚ñÄ‚ñà‚ñÄ‚ÄÉ‚ñà‚ñÄ‚ñà‚ÄÉ‚ñà‚ñÄ‚ñà
‚ñà‚ñÑ‚ñÑ‚ÄÉ‚ñà‚ñÑ‚ñà‚ÄÉ‚ñà‚ñÑ‚ñà‚ÄÉ‚ñÑ‚ñà‚ÄÉ‚ñë‚ñë‚ÄÉ‚ñà‚ñÑ‚ñÑ‚ÄÉ‚ñà‚ñÑ‚ñà‚ÄÉ‚ñà‚ñÑ‚ñÑ‚ÄÉ‚ñà‚ñÑ‚ñÑ‚ÄÉ‚ñà‚ñà‚ñÑ‚ÄÉ‚ñà‚ñÑ‚ñÑ‚ÄÉ‚ñë‚ñà‚ñë‚ÄÉ‚ñà‚ñÑ‚ñà‚ÄÉ‚ñà‚ñÄ‚ñÑ
```
###  [English lang: README.md](README.md)

###  [CHANGELOG.md](CHANGELOG.md)


## –¶–µ–ª—å

–ï—Å–ª–∏ –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ü–û –∫–æ—Ç–æ—Ä–æ–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –∫–ª–∏–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Å–≤–æ–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –∏–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ –∏–∑—É—á–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ü–û –Ω–µ –∏–º–µ—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–æ –ü–û —Ä–∞–±–æ—Ç–∞–µ—Ç.


–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ü–û –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –æ —Å–±–æ—è—Ö –Ω–∞–ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Sentry. –≠—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –∫ —Ç–æ–º—É –∂–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ø–æ–ª–Ω–æ–π –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å.


–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–º –Ω—É–∂–Ω—ã–µ –ª–æ–≥ —Ñ–∞–π–ª—ã –∏ –∏–∑—É—á–∏—Ç—å –∏—Ö –≤ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏. –ù–æ —Ç—É—Ç –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤–∞–º –Ω—É–∂–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏ —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤ –∫–∞–∫ –¥–ª—è –≤–∞—Å —Ç–∞–∫ –∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
–≠—Ç–æ –º–æ–≥ –±—ã—Ç—å FTP, SFTP, –æ–±–ª–∞–∫–æ etc. –ù–æ —á—Ç–æ –µ—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏?

–í–æ–∑–º–æ–∂–Ω–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –∫–ª–∏–µ–Ω—Ç–∞ –∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ. –ò –∫–∞–∑–∞–ª–æ—Å—å –±—ã –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞. –ù–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –ª–æ–≥ —Ñ–∞–π–ª–æ–≤.
–î–∞–∂–µ –µ—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ–∂–µ—Ç –∑–∞–±—Ä–∞—Ç—å —Å–µ–±–µ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∏–∑—É—á–∏—Ç—å –∏—Ö –ª–æ–∫–∞–ª—å–Ω–æ, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏.

Logs-collector –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ—à–∏—Ç—å —ç—Ç–∏ –∑–∞–¥–∞—á–∏.

Logs-collector —è–≤–ª—è–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã.


## –¢–µ—Ä–º–∏–Ω—ã
- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: —ç—Ç–æ –ü–û —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–µ–π
- –¢–∏–∫–µ—Ç: —ç—Ç–æ –Ω–æ–º–µ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —Ç–∏–∫–µ—Ç–æ–º –≤ –≤–∞—à–µ–π help desk —Å–∏—Å—Ç–µ–º–µ
- –ê—Ä—Ö–∏–≤: —ç—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –ª–æ–≥ —Ñ–∞–π–ª (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- –°–æ–∑–¥–∞–µ—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –°–æ–∑–¥–∞–µ—Ç–µ —Ç–∏–∫–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ –Ω–æ–º–µ—Ä–æ–º 
- –ü–µ—Ä–µ–¥–∞–µ—Ç–µ –∫–ª–∏–µ–Ω—Ç—É —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω —Ç–∏–∫–µ—Ç–∞
- –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ö–∏–≤ –ª–æ–≥ —Ñ–∞–π–ª–æ–≤
- –°–∫–∞—á–∏–≤–∞–µ—Ç–µ –∞—Ä—Ö–∏–≤ (–Ω–∞—Ö–æ–¥–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã)
- –£–¥–∞–ª—è–µ—Ç–µ –∞—Ä—Ö–∏–≤ –∏–ª–∏ —Ç–∏–∫–µ—Ç –∏–ª–∏ –æ—Ç–º–µ—á–∞–µ—Ç–µ —Ç–∏–∫–µ—Ç —Ä–µ—à–µ–Ω–Ω—ã–º

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –Ω–µ –Ω—É–∂–Ω–æ –¥–∞–≤–∞—Ç—å auth credentials
- –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —É–Ω–∏–∫–∞–ª–µ–Ω –∏ —Å–≤—è–∑–∞–Ω —Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–∏–º —Ç–∏–∫–µ—Ç–æ–º
- –¢–æ–∫–µ–Ω –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –∏ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±
- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π RestFullAPI v1
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –£–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ –∏–ª–∏ —Ç–∏–∫–µ—Ç–∞ —Ç–∞–∫ –∂–µ —É–¥–∞–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 12 —Ñ–∞–∫—Ç–æ—Ä–æ–≤
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–∫–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –º–µ–Ω—å—à–µ 150mb
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å sqlite3 —Ç–∞–∫ –∏ —Å PostgreSQL^15
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–æ–π –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –≤–µ–± —Å–µ—Ä–≤–µ—Ä–∞
- healthcheck –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –Ω–µ —Å–≤—è–∑–∞–Ω —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- –¢–æ–∫–µ–Ω –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–µ–π.
- –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ - 2FA –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–µ–Ω–∞
- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –ø—Ä–æ–ø–∞—Ç—á–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 2FA
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º 
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã Django –∏ DRF

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ docker –æ–±—Ä–∞–∑–∞:
- –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≥–¥–µ –≤–∞–º —É–¥–æ–±–Ω–æ
- –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª docker-compose.yml –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª .env —Ç—Ä–µ–±—É–µ–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–º. –Ω–∏–∂–µ

>–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–æ–∫–µ—Ä –∏ sqlite –∫–∞–∫ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```yaml
version: "3"

# to set environment variables:
# create a .env file in the same directory as docker-compose.yaml

services:
  server:
    image: mois3y/logs_collector:0.1.0
    container_name: logs-collector
    restart: unless-stopped
    env_file:
      - ./.env
    ports:
      - "80:8000"
    volumes:
      - /etc/timezone:/etc/timezone:ro  # optional
      - /etc/localtime:/etc/localtime:ro  # optional
      - logs_collector_data:/data

volumes:
  logs_collector_data:
```

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:
- –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- docker-compose.yaml —É–∂–µ –µ—Å—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- —Å–æ–∑–¥–∞–π—Ç–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ñ–∞–π–ª .env
- –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Ç—Ä–µ–±—É–µ–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–º. –Ω–∏–∂–µ
- —Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–µ:
  
```sh
docker-compose up -d --build
```
- –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª –∏ –≤–Ω–µ—Å—Ç–∏ –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∫–∏:
#### docker-compose-example-psql.yaml c PostgreSQL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```yaml
services:
  logs_collector:
    container_name: logs-collector
    build:
      context: .
      args:
        - VERSION=${VERSION}
        - SRC_DIR=${SRC_DIR}
        - SCRIPTS_DIR=${SCRIPTS_DIR}
        - APP_DIR=${APP_DIR}
        - DATA_DIR=${DATA_DIR}
        - WEB_PORT=${WEB_PORT}
        - USER_NAME=${USER_NAME}
        - USER_GROUP=${USER_GROUP}
        - APP_UID=${APP_UID}
        - APP_GID=${APP_GID}
    ports:
      - "${WEB_HOST}:${WEB_PORT}:${WEB_PORT}"
    volumes:
      - type: volume
        source: logs_collector_data
        target: ${APP_DIR}/data
    env_file:
      - ./.env
    depends_on:
      - db
      
  db:
    image: postgres:15-alpine3.18
    container_name: psql-collector
    volumes:
      - logs_collector_psql_data:/var/lib/postgresql/data/
    env_file:
      - ./.env


volumes:
  logs_collector_data:
  logs_collector_psql_data:
```

#### docker-compose-example-psql.yaml c sqlite –∏ bind-mount:

```yaml
version: "3"

# to set environment variables:
# create a .env file in the same directory as docker-compose.yaml

services:
  logs_collector:
    container_name: logs-collector
    build:
      context: .
      args:
        - VERSION=${VERSION}
        - SRC_DIR=${SRC_DIR}
        - SCRIPTS_DIR=${SCRIPTS_DIR}
        - APP_DIR=${APP_DIR}
        - DATA_DIR=${DATA_DIR}
        - WEB_PORT=${WEB_PORT}
        - USER_NAME=${USER_NAME}
        - USER_GROUP=${USER_GROUP}
        - APP_UID=${APP_UID}
        - APP_GID=${APP_GID}
    ports:
      - "${WEB_HOST}:${WEB_PORT}:${WEB_PORT}"
    volumes:
      - "/opt/collector/data:${DATA_DIR}"
      - "/opt/collector/data/db.sqlite3:${DATA_DIR}/db.sqlite3"
    env_file:
      - /.env
```

üî¥

‚ùó–í–ê–ñ–ù–û‚ùó


–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ bind-mount –∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç–µ –µ–≥–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ–º–Ω–∏—Ç–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω UID 1000 –µ—Å–ª–∏ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
–∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å root –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏
—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

–í –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ –≤–∞—à–∏–º –ª—é–±–∏–º—ã–º –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏.

–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Å—Ç–µ–∫ docker-compose.yaml

>–ú–æ–∂–Ω–æ —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å, –Ω–æ Gunicorn —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —ç—Ç–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞.
>
>–Ø —Å–æ–ª–∏–¥–∞—Ä–µ–Ω —Å –Ω–∏–º–∏, —Ç–∞–∫ —á—Ç–æ –≤–∞—Å –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏–ª–∏)

üî¥

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –¥–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
>–æ–∫—Ä—É–∂–µ–Ω–∏—è.
>–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```
 ‚ñà‚ñÄ‚ñÑ ‚ñë‚ñë‚ñà ‚ñÑ‚ñÄ‚ñà ‚ñà‚ñÑ‚ñë‚ñà ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÄ‚ñà ‚ñÄ
 ‚ñà‚ñÑ‚ñÄ ‚ñà‚ñÑ‚ñà ‚ñà‚ñÄ‚ñà ‚ñà‚ñë‚ñÄ‚ñà ‚ñà‚ñÑ‚ñà ‚ñà‚ñÑ‚ñà ‚ñÑ
```

| ENV                  | DEFAULT         | INFO                     |
| -------------------- | --------------- | ------------------------ |
| SECRET_KEY           | j9QGbvM9Z4otb47 | ‚ùóchange this immediately|
| DEBUG                | False           | use only False in prod   |
| ALLOWED_HOSTS        | '*'             | list separated by commas |
| CSRF_TRUSTED_ORIGINS |                 | list separated by commas |
| DB_URL               |                 | url for connect db       |
| TZ                   | 'UTC'           | server timezone          |



[CSRF_TRUSTED_ORIGINS](https://docs.djangoproject.com/en/4.2/ref/settings/#csrf-trusted-origins)

–¢—Ä–µ–±—É–µ—Ç—Å—è –≤ —Å—Ä–µ–¥–µ –¥–æ–∫–µ—Ä –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–∏
–ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ url —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç–æ–π
>http://localhost,http://*.domain.com,http://127.0.0.1,http://0.0.0.0


[DB_URL](https://django-environ.readthedocs.io/en/latest/quickstart.html)

–ù—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL
–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL

| ENV               | VALUE          |
| ----------------- | -------------- |
| POSTGRES_USER     | admin          |
| POSTGRES_PASSWORD | ddkwndkjdX7RrP |
| POSTGRES_DB       | collector      |

–ü—Ä–∏–º–µ—Ä:

#### psql://admin:ddkwndkjdX7RrP@psql-collector:5432/collector
- –ü—Ä–æ—Ç–æ–∫–æ–ª: **psql://**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: **admin**
- –ü–∞—Ä–æ–ª—å: **ddkwndkjdX7RrP**
- IP –∞–¥—Ä–µ—Å: **psql-collector**
- –ü–æ—Ä—Ç: **5432**
- –ò–º—è –ë–î: **collector**

```
‚ñà‚ñÄ‚ñÄ ‚ñà‚ñë‚ñà ‚ñà‚ñÑ‚ñë‚ñà ‚ñà ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÄ‚ñà ‚ñà‚ñÄ‚ñà ‚ñà‚ñÑ‚ñë‚ñà ‚ñÄ
‚ñà‚ñÑ‚ñà ‚ñà‚ñÑ‚ñà ‚ñà‚ñë‚ñÄ‚ñà ‚ñà ‚ñà‚ñÑ‚ñÑ ‚ñà‚ñÑ‚ñà ‚ñà‚ñÄ‚ñÑ ‚ñà‚ñë‚ñÄ‚ñà ‚ñÑ
```

| ENV                         | DEFAULT        |
| --------------------------- | -------------- |
| GUNICORN_BIND               | '0.0.0.0:8000' |
| GUNICORN_BACKLOG            | 2048           |
| GUNICORN_WORKERS            | 2              |
| GUNICORN_WORKER_CLASS       | 'sync'         |
| GUNICORN_WORKER_CONNECTIONS | 1000           |
| GUNICORN_THREADS            | 1              |
| GUNICORN_TIMEOUT            | 3600           |
| GUNICORN_KEEPALIVE          | 2              |
| GUNICORN_LOGLEVEL           | 'info'         |

[GUNICORN_*](https://docs.gunicorn.org/en/stable/settings.html)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

GUNICORN_BIND –Ω–µ –∏–∑–º–µ–Ω—è–π—Ç–µ —ç—Ç–æ —Ç–∞–∫ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–π –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

GUNICORN_TIMEOUT –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ 3600. –¢–∞–∫–æ–π –±–æ–ª—å—à–æ–π —Ç–∞–π–º–∞—É—Ç –Ω—É–∂–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤.
–ü–æ—Å–∫–æ–ª—å–∫—É —è —Å—Ç–∞—Ä–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –∏–¥–µ—Ç –≤ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫.

–ï—Å–ª–∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —á–∞—Å–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–µ—Ç—Å—è, —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–æ—Ä–∫–µ—Ä–æ–≤ gunicorn –µ—Å–ª–∏ –≤–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

‚ùó–í–ê–ñ–ù–û‚ùó

Gunicorn –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–∏—Å–∞—Ç—å –≤ –ª–æ–≥ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:
```python
'%({X-Forwarded-For}i)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s"'
```
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –≤ –ª–æ–≥–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ IP –∞–¥—Ä–µ—Å –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–ª—å–∫–æ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞

**X-Forwarded-For**

–í –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞ –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏


## –ü–æ–º–æ—â–Ω–∏–∫–∏
–í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è scripts –≤ –Ω–µ–π –ª–µ–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç uploader.sh —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è curl.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ—Å—Ç–æ–π:

```cmd
Usage: ./uploader.sh [options [parameters]]

Options:

 -f | --file     full path to upload file required
 -t | --token    access token             required
 -d | --dst      storage domain name      required
 -v | --version  print version
 -h | --help     print help
```


#### –ü—Ä–∏–º–µ—Ä:

```sh
./uploader.sh \
    --dst collector.domain.zone \
    --token e63268f4-5946-42eb-a678-b02182f14e87 \
    --file /root/logs/all-logs.tar.gz 
```


## –õ–∏—Ü–µ–Ω–∑–∏—è

GNU GPL 3.0
